<html>
{% load staticfiles %}
<head>
	<meta http-equiv="content-type" content="text/html; charset=iso-8859-1"/>
	<title>mnml rdr</title>
	<!-- http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
<!--	<script src={% static "reader/jquery.cookie.js" %} type="text/javascript"></script> -->
<!--	<script src={% static "reader/jquery.treeview.js" %} type="text/javascript"></script> -->
<!--	<script type="text/javascript" src={% static "reader/demo.js" %}></script> -->
	<link rel="stylesheet" type="text/css" href="{% static 'reader/style.css' %}" />
	<link type="text/css" rel="stylesheet" href="{% static 'reader/tree_style.css' %}">


</head>
<body>
<script>
// Execute this after the site is loaded.
$(function() {
    // Find list items representing folders and
    // style them accordingly.  Also, turn them
    // into links that can expand/collapse the
    // tree leaf.
    $('li > ul').each(function(i) {
        // Find this list's parent list item.
        var parent_li = $(this).parent('li');

        // Style the list item as folder.
        parent_li.addClass('folder');

        // Temporarily remove the list from the
        // parent list item, wrap the remaining
        // text in an anchor, then reattach it.
        var sub_ul = $(this).remove();
        parent_li.wrapInner('<a/>').find('a').click(function() {
            // Make the anchor toggle the leaf display.
            sub_ul.toggle();
        });
        parent_li.append(sub_ul);
    });

    // Hide all lists except the outermost.
    $('ul ul').hide();
});
</script>

<div id='head'>
  <div class='column last span-24'>

	  <div class='column l'> 
	     <p class='header-l'><a href='/reader/'>mnml rdr : read later</a></p> 
	  </div> 
	  
	  <div class='column r'> 
	     <p class='header-r'><a href='/admin'>admin</a></p>
	  </div> 
  </div>
</div>


<!-- <img src="{% static "reader/681661618-refresh.png" %}" alt="My image"/> -->


<div id='body'>
 <div id='nav-cont'>
  <div id='nav'>
  
   <ul id="browser" class="filetree">

    {% for label in feeds_labels %}
	  
       <li> 
	<span> {{ label.label }} </span>
         <ul>
          {% for feed in label.feeds.all %}
          <div id='feed'>
           <li class="file">
             <span>
                <a href="/reader/{{ feed.id }}">{{ feed.title }} ({{feed.unread_count}})</a>
             </span>
           </li>
           </div>
          {% endfor %}
         </ul>
	</li>
       
    {% endfor %}
    </ul>
   </div>
 </div>



 <div id='articles'>
{% if articles %}
  {% for article in articles %}

  {% if forloop.first == True %}
       <form action="/reader/update/{{article.feed.id}}/" method="POST">
        <!-- first! -->
  {% endif %}

  {% csrf_token %}
  {{ formset.management_form }}
   <div id={{article.id}} class='article-detail'>	
        <script>
	/*
	 $('#{{article.id}}').click(function(){
               var $checkbox = $(this).find("input[name*='unread']");
               $checkbox.attr('checked', !$checkbox.attr('checked'));
         });
	*/ 
        </script>

	 <h3><a href="{{ article.link }}" target="_blank">{{ article.title }}</a></h3>
         <p class='pub_date'>From: <a href='{{article.feed.homepage}}'>{{article.feed.title}}</a></p>
         <p class='pub_date'>Posted: {{ article.update_date }} || Retrieved: {{article.add_date}}</p> 
         {% for form in formset.forms %}
            {% for hid in form.hidden_fields %}
                {% if hid.value == article.id %}
                {{ form }}
                {% endif %}
            {% endfor %}
         {% endfor %}
         <input type="submit" value="submit">
         <br/><br/>
	 {{article.content | safe }} 
   </div>
        {% endfor %}
  </form>
  {% else %} 
    <p>No unread articles.</p> 
  {% endif %} 
</div>
</div>

<div id='footer'>
  <div class='column last span-24'>
      <p></p>
  </div>
</div>
</body>
</html>
